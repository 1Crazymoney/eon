<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>EON</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link type="text/css" rel="stylesheet" href="src/build/eon.css">
    <script src="src/build/eon.js"></script>

    <style>
      .c3-region-1 {
        fill: #dd3333;
        fill-opacity: 0.8
      }
      #dashboard {
        position: relative;
        height: 600px;
      }
      #map {
        width:100%;
        height: 600px;
      }
      #rickshaw {
        z-index: 2;
        position: absolute;
        left: 10px;
        bottom: 30px;
      }
      #c3 {
        z-index: 2;
        position: absolute;
        right: 10px;
        width: 200px;
        height: 100px;
        top: 10px;
      }
    </style>

  </head>

  <body>

    <div id="dashboard">
      <div id="rickshaw">
        <div id="rickshaw-chart"></div>
      </div>
      <div id="c3">
        <div id="c3-chart"></div>
      </div>
      <div id="map"></div>
    </div>

    <script>

    /*
    purple-darkest: #91688C;
    pubnub-medium:  #6b476c;
    purple-black:   #3a2b4a;
    black:          #160e14;
    red-light:      #b35258;
    red-dark:       #601e19;
    blue:           #c7e4de;
    purple-light:   #91688c;
    */

    // helper function
    function getNonZeroRandomNumber(){
      var random = Math.floor(Math.random()*199) - 99;
      if(random==0) return getNonZeroRandomNumber();
      return random;
    }

    var me = {
      icon: {
        'marker-color': '#b35258'
      }
    };
    var them = {
      icon: {
        'marker-color': '#c7e4de'
      }
    };

    var origins = {
      mapbox: [
        {
          latlng: [30.293479, -97.742405],
          options: me
        },
        {
          latlng: [30.370375, -97.756138],
          options: them
        },
        {
          latlng: [30.323118, -97.739144],
          options: them
        },
        {
          latlng: [30.302816, -97.699490],
          options: them
        },
        {
          latlng: [30.250337, -97.754593],
          options: them
        }
      ]
    };

    var copy = function (data) {
      return JSON.parse(JSON.stringify(data));
    }

    var data = {
      mapbox: function(){

        var new_data = copy(origins.mapbox);
        for (var i = 0; i < new_data.length; i++) {

          new_data[i] = {
            options: new_data[i].options,
            latlng: [
              new_data[i].latlng[0] + (getNonZeroRandomNumber() * 0.0002),
              new_data[i].latlng[1] + (getNonZeroRandomNumber() * 0.0002)
            ]
          }

        }

        return new_data;

      },
      rickshaw: function(){

        return [
          Math.floor(Math.random() * 99),
          Math.floor(Math.random() * 99),
          Math.floor(Math.random() * 99),
          Math.floor(Math.random() * 99),
          Math.floor(Math.random() * 99)
        ];

      },
      c3: function() {
        return [
          ['Me', Math.floor(Math.random() * 99)],
          ['Nick', Math.floor(Math.random() * 99)],
          ['Ritika', Math.floor(Math.random() * 99)],
          ['Emily', Math.floor(Math.random() * 99)],
          ['Sami', Math.floor(Math.random() * 99)]
        ]
      }
    }


    // eon.rickshaw
    var graph = new Rickshaw.Graph( {
      element: document.getElementById("rickshaw-chart"),
      width: 300,
      height: 200,
      renderer: 'line',
      stroke: true,
      preserve: true,
      series: [
        {
          color: '#b35258',
          name: 'Me',
          data: []
        },
        {
          color: '#c7e4de',
          name: 'Nick',
          data: []
        },
        {
          color: '#c7e4de',
          name: 'Ritika',
          data: []
        },
        {
          color: '#c7e4de',
          name: 'Emily',
          data: []
        },
        {
          color: '#c7e4de',
          name: 'Sami',
          data: []
        }
      ]
    });

    graph.render();

    new eon.rickshaw({
      channel: 'rickshaw-channel-1',
      graph: graph
    });

    // eon.c3
    var chart = new eon.c3({
      channel: "c3-bar",
      generate: {
        bindto: '#c3-chart',
        data: {
          columns: [],
          labels: false,
          type: 'bar',
          colors: {
            Me: '#b35258',
            Nick: '#c7e4de',
            Ritika: '#c7e4de',
            Emily: '#c7e4de',
            Sami: '#c7e4de'
          }
        },
        bar: {
          width: {
            ratio: 0.5
          }
        },
        tooltip: {
            show: false
        }
      }
    });

    // eon.mapbox
    L.mapbox.accessToken = 'pk.eyJ1IjoiaWFuamVubmluZ3MiLCJhIjoiZExwb0p5WSJ9.XLi48h-NOyJOCJuu1-h-Jg';
    var map = L.mapbox.map('map', 'ianjennings.06d6eddb');

    var channel = 'pubnub-mapbox';

    var tacos = new eon.mapbox({
      map: map,
      channel: channel
    });
    </script>

    <script>

    // pubnub
    var pubnub = PUBNUB.init({
      publish_key: 'demo',
      subscribe_key: 'demo'
    });

    map.setView(data.mapbox()[0].latlng, 13);

    setInterval(function(){

      pubnub.publish({
        channel: channel,
        message: data.mapbox()
      });

      pubnub.publish({
        channel: 'c3-bar',
        message: {
          columns: data.c3()
        }
      });

      console.log(data.rickshaw())

      pubnub.publish({
        channel: 'rickshaw-channel-1',
        message: {
          y: data.rickshaw(),
          x: new Date().getTime()
        }
      });

    }, 2000);
    </script>

<div class="container">

  <div class="row">

    <div class="col-md-6">
      <h1>EON Realtime Charts</h1>
      <p>Real time charts that work with any platform.</p>
    </div>
    <div class="col-md-6">
      <!-- <a class="btn btn-primary">Get Started</a> -->
    </div>

  </div>

  <div class="row">

    <div class="col-md-8">
      <img src="http://placehold.it/700x300" width="100%"/>
    </div>

    <div class="col-md-4">

      <div class="well">
        Code Here
      </div>

    </div>

  </div>

  <hr />

  <div class="row">

    <div class="col-md-4">

      <div class="well">
        <img src="http://placehold.it/350x150" width="100%"/>
        <h4>C3 Charts</h4>
        <p>Beautifully animated line, bar, and donut charts.</p>
      </div>

    </div>

    <div class="col-md-4">

      <div class="well">
        <img src="http://placehold.it/350x150" width="100%"/>
        <h4>ShutterStock Rickshaw</h4>
        <p>Serious time series charts with advanced customization.</p>
      </div>

    </div>

    <div class="col-md-4">

      <div class="well">
        <img src="http://placehold.it/350x150" width="100%"/>
        <h4>Maps</h4>
        <p>Live updating and navigation for Google Maps.</p>
      </div>

    </div>

  </div>

  <hr />

  <div class="row">

    <div class="col-md-5">
      <img src="http://placehold.it/350x150" width="100%"/>
    </div>

    <div class="col-md-7">
      <h3>Publish from any platform.</h3>
      <p>Because EON is powered by PubNub, you can publish data in real time from any of PubNubs 60+ SDKS. That means EON already integrates with Ruby, Python, NodeJS, and even Arduino.</p>
    </div>

  </div>

  <hr />

  <div class="row">

    <div class="col-md-7">
      <h3>Completely Realtime</h3>
      <p>No matter where you publish your chart data from, your chart will always be updated in real time. Graph your server memory usage, watch the live creation of accounts on your platform, or track drivers across a map.</p>
    </div>

    <div class="col-md-5">
      <img src="http://placehold.it/350x150" width="100%"/>
    </div>

  </div>

  <hr />

  <div class="row">

    <div class="col-md-5">
      <img src="http://placehold.it/350x150" width="100%"/>
    </div>

    <div class="col-md-7">
      <h3>Easy Chart Creation</h3>
      <p>Use our chart creator to automatically configure your custom chart. We'll provide you with the code to get you started quick and teach you how to customize your charts further.</p>
    </div>

  </div>

  <hr />

  <div class="row">

    <div class="col-md-12">
      <h3>Build your own chart.</h3>
      <p><a class="btn btn-primary">Get Started</a></p>
    </div>

  </div>

</div>

  </body>
</html>
